1.CREATION OF STRUCTURE
--------------------------

CREATE DATABASE asp_project

CREATE TABLE restorers
(
  restorerId INT PRIMARY KEY IDENTITY,
  firstName VARCHAR(50),
  lastName VARCHAR(50),
  password VARCHAR(30),
  gender varchar(10),
  adress varchar(100),
  postalCode varchar(15),
  country varchar(50),
  phoneNumber varchar(50)
)

CREATE TABLE customers
(
  customerId INT PRIMARY KEY IDENTITY,
  firstName VARCHAR(50),
  lastName VARCHAR(50),
  password VARCHAR(30),
  gender varchar(10),
  adress varchar(100),
  postalCode varchar(15),
  country varchar(50),
  phoneNumber varchar(50),
  dateOfBirth DATE
)


CREATE TABLE restaurants
(
  restaurantId INT PRIMARY KEY IDENTITY,
  name VARCHAR(50),
  lastName VARCHAR(50),
  password VARCHAR(30),
  gender varchar(10),
  adress varchar(100),
  postalCode varchar(15),
  country varchar(50),
  phoneNumber varchar(50),
  restaurantType varchar(30),
  description varchar(200),
  tvaNumber varchar(30),
  restorerId INT FOREIGN KEY REFERENCES restorers(restorerId) ON DELETE CASCADE,
  
)


CREATE TABLE opinions
(
  opinionId INT PRIMARY KEY IDENTITY,
  restaurantId INT FOREIGN KEY REFERENCES restaurants(restaurantId) ON DELETE CASCADE,
  customerId INT FOREIGN KEY REFERENCES customers(customerId) ON DELETE CASCADE ,
  opinionText varchar(200),
  rating INT
)

CREATE TABLE schedules
(
  scheduleId INT PRIMARY KEY IDENTITY,
  restaurantId INT FOREIGN KEY REFERENCES restaurants(restaurantId) ON DELETE CASCADE,
  openingDay varchar(20),
  openTime time,
  closeTime time
)


CREATE TABLE menus
(
  menuId INT PRIMARY KEY IDENTITY,
  restaurantId INT FOREIGN KEY REFERENCES restaurants(restaurantId) ON DELETE CASCADE ,
  name VARCHAR(50),
  price DECIMAL(5,2),
  description varchar(200),
  typeService varchar(50)
)

CREATE TABLE dishes
(
  dishId INT PRIMARY KEY IDENTITY,
  restaurantId INT FOREIGN KEY REFERENCES restaurants(restaurantId) ON DELETE CASCADE ,
  name VARCHAR(50),
  price DECIMAL(5,2),
  description varchar(200),
  typeService varchar(50),
  typeDish varchar(50)
  
)


CREATE TABLE menu_details
(
  menuId INT FOREIGN KEY REFERENCES menus(menuId) ,
  dishId INT FOREIGN KEY REFERENCES dishes(dishId)
)


CREATE TABLE orders
(
 orderId INT PRIMARY KEY IDENTITY,
 orderStatus varchar(50),
 deliveryAdress varchar(100),
 orderDate datetime,
 note varchar(200),
 customerId INT FOREIGN KEY REFERENCES customers(customerId) ON DELETE CASCADE,
)

CREATE TABLE order_dish_details
(
  orderId INT FOREIGN KEY REFERENCES orders(orderId) ON DELETE CASCADE,
  dishId INT FOREIGN KEY REFERENCES dishes(dishId) 
)


CREATE TABLE order_menu_details
(
  orderId INT FOREIGN KEY REFERENCES orders(orderId) ON DELETE CASCADE,
  menuId INT FOREIGN KEY REFERENCES menus(menuId)
)

--------------------
A TESTER CAR PAS SÃ›R POUR LES CASCADES

---------------------------------------
2.INSERTIONS
____________

INSERT INTO customers (firstName,lastName,password,gender,adress,postalCode,country,phoneNumber,dateOfBirth) VALUES 
('Daniel','Pret','password1234','male','rue enghien 12','6200','Belgique','0479854147','1956-12-03'),('Marie','Roper','password1234','female','rue enior 32','6400','Belgique','0479334117','1976-11-28')
